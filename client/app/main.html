<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>真知保护</title>

<script src="jquery-1.9.1.min.js"></script>
<script src="socket.io.js"></script>
<script src="nodeim.js"></script>

<link rel="stylesheet" type="text/css" href="styles/webim.css" />
<link rel="stylesheet" type="text/css" href="styles/webimpage.css" />
</head>
<body onselectstart="return false;">

	<div id="windowBorder" class="wWindowBorder" style=" width: 260px; height: 550px; display: none;"></div>
	
	<div class="wMain" id="wMain"
		style="position: absolute;  width: 260px; height: 550px; z-index: 9713; left:0px;top:0px">
		<div class="wRound_lt"></div>
		<div class="wRound_rt"></div>
		<div class="wRound_lb"></div>
		<div class="wRound_rb"></div>
		<div class="wResize"></div>
		<div class="wContent">
			<div class="wMainTitle" style="color: rgb(153, 153, 153);">
				<div class="wIcon">
					<img src="images/im/icon.png">
				</div>
				<div class="wText" style="cursor: move;">
					<span style="color: #fff">WebIM 1.0</span>
				</div>
				<div class="wControl">
					<div class="wControlMin" onmouseover="this.scrollTop='13'"
						onmouseout="this.scrollTop='0'">
						<img src="images/im/maincontrolmin.png" title="最小化">
					</div>
					<div class="wControlClose" onmouseover="this.scrollTop='15'"
						onmouseout="this.scrollTop='0'">
						<img src="images/im/maincontrolclose.png" title="关闭">
					</div>
				</div>
			</div>
			<div class="wWindowContent"
				style="background-color: transparent; height: 525px;">
				<div class="wMainTool">
					<div class="wMainUserInfo">
						<div class="wMainUserFaceBG">
							<img
								src="http://webos.knowledge.com.cn/webim/userface/default.gif"
								style="width: 51px; height: 51px; cursor: pointer"
								title="查看您的联系人卡片">
						</div>
						<div class="wMainUserInfoRight" style="width: 178px;">
							<div style="width: 100%; float: left">
								<div class="wMainUserName">
									<span>qq <span style="font-size: 12px; color: #fff" onclick="menuUserNameToggle()">[联机]</span></span>
									<img src="images/im/arrowdown.png" style="padding-left: 3px" onclick="menuUserNameToggle()">
								</div>
								<div id="menuUserName" class="sysMenu"
								style="width: 120px; height: 199px; top: 60px; left: 100px; display: none;">
								<div onselectstart="return false;" class="sysMenuItemWithIcon"
									onmouseover="this.className='sysMenuItemWithIcon sysMenuItemHover'"
									onmouseout="this.className='sysMenuItemWithIcon'"
									style="background-image: url(images/im/m0.png)"
									onclick="selectMenuUserName()">联机</div>
								<div onselectstart="return false;" class="sysMenuItemWithIcon"
									onmouseover="this.className='sysMenuItemWithIcon sysMenuItemHover'"
									onmouseout="this.className='sysMenuItemWithIcon'"
									style="background-image: url(images/im/m1.png)"
									onclick="selectMenuUserName()">忙碌</div>
								<div onselectstart="return false;" class="sysMenuItemWithIcon"
									onmouseover="this.className='sysMenuItemWithIcon sysMenuItemHover'"
									onmouseout="this.className='sysMenuItemWithIcon'"
									style="background-image: url(images/im/m2.png)"
									onclick="selectMenuUserName()">马上回来</div>
								<div onselectstart="return false;" class="sysMenuItemWithIcon"
									onmouseover="this.className='sysMenuItemWithIcon sysMenuItemHover'"
									onmouseout="this.className='sysMenuItemWithIcon'"
									style="background-image: url(images/im/m2.png)"
									onclick="selectMenuUserName()">离开</div>
								<div onselectstart="return false;" class="sysMenuItemWithIcon"
									onmouseover="this.className='sysMenuItemWithIcon sysMenuItemHover'"
									onmouseout="this.className='sysMenuItemWithIcon'"
									style="background-image: url(images/im/m2.png)"
									onclick="selectMenuUserName()">通话中</div>
								<div onselectstart="return false;" class="sysMenuItemWithIcon"
									onmouseover="this.className='sysMenuItemWithIcon sysMenuItemHover'"
									onmouseout="this.className='sysMenuItemWithIcon'"
									style="background-image: url(images/im/m2.png)"
									onclick="selectMenuUserName()">外出就餐</div>
								<div onselectstart="return false;" class="sysMenuItemWithIcon"
									onmouseover="this.className='sysMenuItemWithIcon sysMenuItemHover'"
									onmouseout="this.className='sysMenuItemWithIcon'"
									style="background-image: url(images/im/m3.png)"
									onclick="selectMenuUserName()">隐身</div>
								<div onselectstart="return false;" class="sysMenuItemDisabled"></div>
								<div onselectstart="return false;" class="sysMenuItemWithIcon"
									onmouseover="this.className='sysMenuItemWithIcon sysMenuItemHover'"
									onmouseout="this.className='sysMenuItemWithIcon'"
									style="background-image: url(images/im/m4.png)"
									onclick="selectMenuUserName()">注销</div>
							</div>
							</div>
							<div style="width: 100%; float: left">
								<div class="wMainUserSign" title="点击修改"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="wMainSearchUserPannel">
					<div style="float: left; padding: 3px 8px 0px 6px; width: 180px;">
						<input title="通过输入姓名或邮箱来查找联系人"
							style="padding-right: 15px; width: 165px;"
							class="wMainSearchUserBG" type="text">
					</div>
					<div style="padding-top: 4px">
						<div class="wMainContentButton"
							onmouseover="this.className='wMainContentButton wMainContentButtonHover'"
							onmouseout="this.className='wMainContentButton'" onclick="openusersWindow()">
							<img src="images/im/tooladdfriend.png"
								style="height: 16px; width: 16px" title="添加联系人">
						</div>
						<div class="wMainContentButton"
							onmouseover="this.className='wMainContentButton wMainContentButtonHover'"
							onmouseout="this.className='wMainContentButton'">
							<img src="images/im/toollisttype.png"
								style="height: 16px; width: 16px" title="对联系人进行排序">
						</div>
					</div>
				</div>
				<div class="wMainMain" onselectstart="return false"
					style="height: 374px;">
					<div class="wMainUserHeaderEx" g>联机</div>
					<div class="wMainUserContainer" style="height: 26px;" id="onlineList">
						
					</div>
					<div class="wMainUserHeaderEx" g>脱机 ( 2 )</div>
					<div class="wMainUserContainer" style="height: 52px;" id="unlineList">
						
					</div>
				</div>
				<div class="wMainSearchWebPannel">
					<div class="wMainToolBar">
						<div class="wMainToolButton"
							onmouseover="this.className='wMainToolButton wMainToolButtonHover'"
							onmouseout="this.className='wMainToolButton'">
							<img src="images/im/toolshowfocus.png"
								style="height: 25px; width: 25px" title="打开今日焦点">
						</div>
						<div class="wMainToolButton"
							onmouseover="this.className='wMainToolButton wMainToolButtonHover'"
							onmouseout="this.className='wMainToolButton'">
							<img src="images/im/toolmsghistory.png"
								style="height: 27px; width: 22px" title="打开聊天记录">
						</div>
						<div class="wMainToolButton"
							onmouseover="this.className='wMainToolButton wMainToolButtonHover'"
							onmouseout="this.className='wMainToolButton'">
							<img src="images/im/toolprofile.png"
								style="height: 27px; width: 23px" title="编辑个人资料">
						</div>
						<div class="wMainToolButton"
							onmouseover="this.className='wMainToolButton wMainToolButtonHover'"
							onmouseout="this.className='wMainToolButton'">
							<img src="images/im/tooloption.png"
								style="height: 24px; width: 25px" title="选项">
						</div>
						<div class="wMainToolButton"
							onmouseover="this.className='wMainToolButton wMainToolButtonHover'"
							onmouseout="this.className='wMainToolButton'"
							style="display: none">
							<img src="images/toolmanage.gif"
								style="height: 16px; width: 17px" title="管理">
						</div>
					</div>
				</div>
				<input type="text"
					style="position: absolute; top: 58px; left: 75px; height: 14px; width: 175px; border: 1px solid rgb(127, 157, 185); display: none;">
					<img
					style="display: none; position: absolute; top: 139px; right: 63px; height: 8px; width: 8px; cursor: pointer"
					title="点击此处清除文本" src="images/close.gif"
					onmouseover="this.src='images/closehover.gif'"
					onmouseout="this.src='images/close.gif'">
			</div>
		</div>
		<div class="wLoading" style="display: none;">加载中...</div>
	</div>
	
	<a href="#" onClick="_login();">登陆</a>
	<script>
	
	
	//jQuery("body").append('<br/><br/><br/><br/><br/><br/><iframe id="ii" src="chat.htm" width="100%" height="500px" frameborder="0"></iframe>');
	
	var chatWindow = null;
	function openChatWindow(){
		chatWindow = kate.createWindow(kate.appFolder+'/chat.html') ;
		chatWindow.resize(695,495) ;
		chatWindow.show();
	}
	var find1Window = null;
	var find2Window = null;
	function openusersWindow(){
		find1Window = kate.createWindow(kate.appFolder+'/add1.html') ;
		find1Window.resize(359,289) ;
		find1Window.show();
		
		find2Window = kate.createWindow(kate.appFolder+'/add2.html') ;
		find2Window.resize(359,289) ;
		find2Window.hide();
	}

	function menuUserNameToggle(){
		jQuery("#menuUserName").toggle();
	}
	function selectMenuUserName(){
		menuUserNameToggle();
	}
	
	jQuery(".wMainUserHeaderEx").click(function(){
		
		if( jQuery(this).attr("class") == "wMainUserHeaderEx"){
			
			jQuery(this).next().hide();
			jQuery(this).attr("class" , "wMainUserHeader");
		}else{

			jQuery(this).next().show();
			jQuery(this).attr("class" , "wMainUserHeaderEx");
		}
		
	})
	jQuery(".wMainUserItem").click(function(){
		
		jQuery(".wMainUserItem").each(function(){
			jQuery(this).css("background-color","");
		})
		jQuery(this).css("background-color","rgb(255, 239, 176)");
	})

	
	
	jQuery(".wMainTitle").mousedown(function(e){
		
		var bs = jQuery("#windowBorder");
		var _me = jQuery("#wMain");
		
		bs.css("top" , parseInt(jQuery("#wMain").css("top")) +"px");
		bs.css("left" , parseInt(jQuery("#wMain").css("left")) +"px");
		bs.css("width" , parseInt(jQuery("#wMain").width()+"px"));
		bs.css("height" , parseInt(jQuery("#height").width()+"px"));
		
		bs.show();
		var chaLeft = e.clientX - parseInt(_me.css("left"));
		var chaTop = e.clientY - parseInt(_me.css("top"));
		document.body.style.cursor = "move";
		document.onmousemove = function(e)
		{
			bs.css("left" ,(e.clientX-chaLeft) +"px");
			bs.css("top" , (e.clientY-chaTop) +"px");
		};
		document.onmouseup = function()
		{
			_me.css("left",bs.css("left"));
			_me.css("top",bs.css("top"));
			document.body.style.cursor = "";
			document.onmousemove = document.onmouseup = null;
			jQuery("#windowBorder").hide();
		};
	});
	
	jQuery(".wResize").mousedown(function(e){
		
			var bs = jQuery("#windowBorder");
			var _me = jQuery("#wMain");

			bs.css("top" , parseInt(jQuery("#wMain").css("top")) +"px");
			bs.css("left" , parseInt(jQuery("#wMain").css("left")) +"px");
			bs.css("width" , parseInt(jQuery("#wMain").width()+"px"));
			bs.css("height" , parseInt(jQuery("#height").width()+"px"));
			bs.show();
			

			var _oldCentX = e.clientX;
			var _oldCentY = e.clientY;
			
			document.body.style.cursor = "SE-resize";
			document.onmousemove = function(e)
			{
				bs.css("width",(e.clientX-parseInt(_me.css("top")))+"px");
				bs.css("height",(e.clientY-parseInt(_me.css("left")))+"px");
			};
			document.onmouseup = function(e)
			{
				//jQuery(".wMainUserInfoRight").css("width", parseInt(jQuery(".wMainUserInfoRight").css("width")) + (e.clientX - _oldCentX) );
				
				_me.css("height" , parseInt((parseInt(  bs.css("height")  ))/2)*2 );
				_me.css("width" , parseInt((parseInt(  bs.css("width")  ))/2)*2 );
				
				document.body.style.cursor = "";
				document.onmousemove = document.onmouseup = null;
				bs.hide();
			};
	});

	
	</script>
</body>
</html>
